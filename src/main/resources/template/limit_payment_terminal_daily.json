{
  "id": "limit_payment_terminal_daily",
  "readable_name": "Лимит платежей по терминалу (сутки)",
  "prometheus_query": "round(100 * sum(el_payment_limits_amount_by_calendar{time_range_type_calendar=\"day\", limit_scope_types=\"terminal\", limit_type_turnover_metric=\"amount\", terminal_id=\"${terminal_id}\", shop_id=\"${shop_id}\", provider_id=\"${provider_id}\"}/el_payment_limits_boundary_by_calendar{time_range_type_calendar=\"day\", limit_scope_types=\"terminal\", limit_type_turnover_metric=\"amount\", terminal_id=\"${terminal_id}\", shop_id=\"${shop_id}\", provider_id=\"${provider_id}\"}), 1) > ${limit_percentage_threshold}",
  "alert_name_template": "Суточный лимит платежей для терминала '${terminal_id}', магазина '${shop_id}' и провайдера '${provider_id}' израсходован на ${limit_percentage_threshold}%",
  "alert_notification_template": "Суточный лимит платежей для терминала '${terminal_id}', магазина '${shop_id}' и провайдера '${provider_id}' израсходован на {{ $value }}%",
  "parameters": [
    {
      "id": 1,
      "substitution_name": "provider_id",
      "readable_name": "Введите идентификатор провайдера",
      "mandatory": true,
      "multiple_values": false,
      "dictionary_name": "payment_providers"
    },
    {
      "id": 2,
      "substitution_name": "terminal_id",
      "readable_name": "Введите идентификатор терминала",
      "mandatory": true,
      "multiple_values": false,
      "dictionary_name": "payment_terminals"
    },
    {
      "id": 3,
      "substitution_name": "shop_id",
      "readable_name": "Введите идентификатор магазина",
      "mandatory": true,
      "multiple_values": false,
      "dictionary_name": "shops"
    },
    {
      "id": 4,
      "substitution_name": "limit_percentage_threshold",
      "readable_name": "Введите степень израсходования лимита в процентах (Пример: 85), при достижении которой вас необходимо уведомить",
      "mandatory": true,
      "regexp": "^[0-9][0-9]?$|^100$"
    }
  ]
}